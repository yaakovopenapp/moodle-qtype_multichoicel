define(["jquery"],function(){var init=function(){$(document).ready(function(){$("div.formulation.clearfix").each(function(){$(this).find("div.answer input[type=checkbox]").each(function(){$(this).on("click",function(event){let maxanswers=$(this).data("maxanswers");if(maxanswers){let qid=this.id.replace(/_.*/,"");let totalChecked=$('[id^="'+qid+'"]').toArray().reduce((t,v)=>t+(v.checked?1:0),0);if(!$(this).is(":checked")){$("div.validationerror").remove()}else if(totalChecked<=maxanswers){totalChecked=totalChecked+1;$("div.validationerror").remove()}else{event.preventDefault();event.stopPropagation()}}})})})})};return{init:init}});
